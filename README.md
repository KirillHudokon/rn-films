# films

# Функциональная часть
1. Добавление ***(через Add new на другой скрин)***
2. Удаление ***(через модалку по клику на кнопку удаления в хедере компонента Film)***
3. Показ информации о фильме  ***(по нажатию на кнопку Open инфомарцию можно посмотреть)***
4. Сортировка в алфовитном порядке ***(по нажатию на кнопку Sort a-z происходит сортировка)***
5. Поиск по названию ***(Search by title, 2-ой филд, с начала строки )***
6. Поиск по имени актера ***(Search by stars, по подстроке))***
7. Имфорт фильмов из файла ***(Поле в самом конце, по клику переход в другое окно, по нажатию док -  отправить файл ))***

# Запуск
Не использовал .env, чтобы было легче запустить. Для запуска потребуется пару шагов
1) в папке client нужно выполнить 2 команды: 

```
 1) в папке src/api в index.js поменять url на ваш ipv4 - адрес/films, это нужно для того чтобы запустить апи локально и чтобы работало в продакшен моде, по сути можно просто заменить на http://localhost:5000/films но оно будет работать только в девелопе и нужно будет запустить дебагер
 2) npm i
 3) npx react-native run-android 
```

2) в папке server нужно выполнить 2 команды: 

```
 npm i
 npm start
```
# Стек
Front-end

* React Native
* Redux
* Redux-thunk
* wix/react-native-navigation
* Axios
* react-native-paper(material)
* react-native-document-picker
* ***Enzyme, Chai, Mocha (tests)***

Back-end
* Node.js
* Express
* MongoDB

# Архитектура

Front-end

* actions - синхронные(action creators) и асинхронные экшены, 
* api - асинхронные запросы, отправка данных
* components - dumb components, компоненты которые не следят за изменением стора
    * Action.js - Button для ActionsBar где происходит создание и сортировка фильмов
    * Film.js - компонент с информацией о фильме
    * SearchField.js - Поля для поиска фильмов
    * Confirmation.js - компонент подтверждения для модалки
* containers - smart components, компоненты, которые следят за изменением стора
    * ActionsBar.js - Блок в котором происходят разные события с фильмами
    * AddFilm.js - Создание фильма и его валидация
    * FilePicker.js - Импорт фильмов
    * Films.js - Компонент который следит за фильмами.
    * SearchBar.js - wrapper для филдов
* screens - скрины.
    * AddNew.js - скрин добавления фильма
    * App.js - главный скрин    
* hoc - Декораторы/компоненты высшего поярдка 
    * searchHoc - hoc для поиска фильмов. Встроен живой поиск, который ищет фильм после того как поле не изменялось несколько секунд(чтобы не было кучи запросов)    
* reducers - редьюсер, функция которая вычисляет следующее состояние стора.
    * filmsReducer - функция, которая высляет следующее значения для стора фильмов
    * rootReducer - результирующий редюсер вызывает вложенные редюсеры и собирает их результаты в единый объект состояния.    
* store -стор
    * сonfigureStore.js - настройка стора, создание
* types - константы
* utils - остальное
    * textValues - трансформация для полей обьекта при создании фильма
* naviation - навигация по приложению    

Back-end
* controllers - Логика
* middlewares - промежуточные оброботчики(только 1, для создания файла)
* models - модели для MongoDB
* routes - роуты
    * GET /films - подгрузка всех фильмов
    * POST /films - добавление фильма
    * DELETE /films/:id - удаление фильма по id
    * GET /films/sort/:type - сортировка фильма по типу. в приложение есть только в алфовитном порядке
    * POST /films/search/:how - (должен быть гет) поиск фильма. в приложении есть только по названию(title) и по актеру(star) 
    * POST /films/import - иморта файла для сохранения фильмов
* utils - вспомогательные функции, остальное. 
    * parseFile - чтение файла

# Ветка

```
 main
```